<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>nest-typescript-starter documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">nest-typescript-starter documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>StoryService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/story/story.service.ts</code>
        </p>




            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#addCommentStory">addCommentStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#addStory">addStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#addStoryDraft">addStoryDraft</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#addStoryTemplate">addStoryTemplate</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deleteCommentStory">deleteCommentStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#deleteStory">deleteStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getAllStories">getAllStories</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getCommentsOfStory">getCommentsOfStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getMyStoriesDrafts">getMyStoriesDrafts</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getMyStoriesTemplates">getMyStoriesTemplates</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getStoriesByIds">getStoriesByIds</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#getStory">getStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#mapStory">mapStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#shareStory">shareStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#toggleLikeStory">toggleLikeStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#updateCommentStory">updateCommentStory</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Async</span>
                                <a href="#updateStory">updateStory</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(lookupsService: <a href="../injectables/LookupsService.html">LookupsService</a>, userService: <a href="../injectables/UserService.html">UserService</a>, db: <a href="../injectables/PrismaService.html">PrismaService</a>, firebaseService: <a href="../injectables/FireBaseService.html">FireBaseService</a>, fileService: <a href="../injectables/FileService.html">FileService</a>, i18n: <a href="../injectables/LocalizationService.html">LocalizationService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">src/story/story.service.ts:26</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>lookupsService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/LookupsService.html" target="_self" >LookupsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>userService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/UserService.html" target="_self" >UserService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>db</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/PrismaService.html" target="_self" >PrismaService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>firebaseService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/FireBaseService.html" target="_self" >FireBaseService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>fileService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/FileService.html" target="_self" >FileService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>i18n</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/LocalizationService.html" target="_self" >LocalizationService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addCommentStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            addCommentStory
                        </b>
                        <a href="#addCommentStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addCommentStory(storyId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, comment: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="513"
                            class="link-to-prism">src/story/story.service.ts:513</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storyId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>comment</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            addStory
                        </b>
                        <a href="#addStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addStory(lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, storyData: <a href="../interfaces/StoryDto.html">CreateStoryDto</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="266"
                            class="link-to-prism">src/story/story.service.ts:266</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>storyData</td>
                                    <td>
                                                <code><a href="../interfaces/StoryDto.html" target="_self" >CreateStoryDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addStoryDraft"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            addStoryDraft
                        </b>
                        <a href="#addStoryDraft"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addStoryDraft(lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, storyData: <a href="../classes/CreateStoryDraftDto.html">CreateStoryDraftDto</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="664"
                            class="link-to-prism">src/story/story.service.ts:664</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>storyData</td>
                                    <td>
                                                <code><a href="../classes/CreateStoryDraftDto.html" target="_self" >CreateStoryDraftDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="addStoryTemplate"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            addStoryTemplate
                        </b>
                        <a href="#addStoryTemplate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>addStoryTemplate(lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, storyId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="727"
                            class="link-to-prism">src/story/story.service.ts:727</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>storyId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteCommentStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            deleteCommentStory
                        </b>
                        <a href="#deleteCommentStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteCommentStory(commentId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="576"
                            class="link-to-prism">src/story/story.service.ts:576</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>commentId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            deleteStory
                        </b>
                        <a href="#deleteStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteStory(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="394"
                            class="link-to-prism">src/story/story.service.ts:394</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getAllStories"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            getAllStories
                        </b>
                        <a href="#getAllStories"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getAllStories(lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, pageIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, pageSize: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="205"
                            class="link-to-prism">src/story/story.service.ts:205</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageSize</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getCommentsOfStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            getCommentsOfStory
                        </b>
                        <a href="#getCommentsOfStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getCommentsOfStory(pageIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, pageSize: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, storyId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="601"
                            class="link-to-prism">src/story/story.service.ts:601</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>pageIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageSize</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>storyId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMyStoriesDrafts"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            getMyStoriesDrafts
                        </b>
                        <a href="#getMyStoriesDrafts"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getMyStoriesDrafts(lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, pageIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, pageSize: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="633"
                            class="link-to-prism">src/story/story.service.ts:633</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageSize</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMyStoriesTemplates"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            getMyStoriesTemplates
                        </b>
                        <a href="#getMyStoriesTemplates"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getMyStoriesTemplates(lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, pageIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, pageSize: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="697"
                            class="link-to-prism">src/story/story.service.ts:697</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageSize</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStoriesByIds"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            getStoriesByIds
                        </b>
                        <a href="#getStoriesByIds"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getStoriesByIds(lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, ids: number[], myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, pageIndex: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, pageSize: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="234"
                            class="link-to-prism">src/story/story.service.ts:234</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>ids</td>
                                    <td>
                                            <code>number[]</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageIndex</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>pageSize</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            getStory
                        </b>
                        <a href="#getStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getStory(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, myId?: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="353"
                            class="link-to-prism">src/story/story.service.ts:353</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="mapStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            mapStory
                        </b>
                        <a href="#mapStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>mapStory(story: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>, lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="121"
                            class="link-to-prism">src/story/story.service.ts:121</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>story</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/StoryDto.html" target="_self" >Promise&lt;StoryDto&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="shareStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            shareStory
                        </b>
                        <a href="#shareStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>shareStory(id: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="430"
                            class="link-to-prism">src/story/story.service.ts:430</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>id</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="toggleLikeStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            toggleLikeStory
                        </b>
                        <a href="#toggleLikeStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>toggleLikeStory(storyId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="461"
                            class="link-to-prism">src/story/story.service.ts:461</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>storyId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateCommentStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Async</span>
                            updateCommentStory
                        </b>
                        <a href="#updateCommentStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateCommentStory(commentId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, comment: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="548"
                            class="link-to-prism">src/story/story.service.ts:548</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>commentId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>comment</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateStory"></a>
                    <span class="name">
                        <b>
                            <span class="modifier">Public</span>
                            <span class="modifier">Async</span>
                            updateStory
                        </b>
                        <a href="#updateStory"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateStory(lang: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, storyData: <a href="../interfaces/StoryDto.html">UpdateStoryDto</a>, storyId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, myId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="305"
                            class="link-to-prism">src/story/story.service.ts:305</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>lang</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>storyData</td>
                                    <td>
                                                <code><a href="../interfaces/StoryDto.html" target="_self" >UpdateStoryDto</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>storyId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>myId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>{}</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {
  ForbiddenException,
  forwardRef,
  Inject,
  Injectable,
  NotFoundException,
} from &#x27;@nestjs/common&#x27;;
import CreateStoryDto from &#x27;./dto/CreateStory.dto&#x27;;
import StoryDto from &#x27;./dto/StoryDto&#x27;;
import { LookupsService } from &#x27;../lookups/lookups.service&#x27;;
import { UserService } from &#x27;@/user/user.service&#x27;;
import OperationResult from &#x27;../shared/models/OperationResult&#x27;;
import {
  DeepLinkShareRoutes,
  ErrorCodes,
  MessageCodes,
} from &#x27;@/shared/constants&#x27;;
import { PrismaService } from &#x27;@/shared/core/prisma.service&#x27;;
import FireBaseService from &#x27;@/shared/core/FireBase.service&#x27;;
import { FileService } from &#x27;@/shared/core/file.service&#x27;;
import { LocalizationService } from &#x27;@/shared/core/localization.service&#x27;;
import { UpdateStoryDto } from &#x27;./dto/UpdateStory.dto&#x27;;
import { CreateStoryDraftDto } from &#x27;./dto/CreateStoryDraft.dto&#x27;;

@Injectable()
export class StoryService {
  constructor(
    // @Inject(forwardRef(() &#x3D;&gt; ListingService))
    // private listingService: ListingService,

    private lookupsService: LookupsService,
    private userService: UserService,
    private readonly db: PrismaService,
    private readonly firebaseService: FireBaseService,
    private readonly fileService: FileService,
    private readonly i18n: LocalizationService,
  ) {}

  // public async updateStory(
  //   id: string,
  //   lang: string,
  //   _storyData: CreateStoryDto,
  // ): Promise&lt;StoryDto&gt; {
  //   // await Story.update(storyData, {
  //   //   where: {
  //   //     id: id,
  //   //   },
  //   // });
  //   const story &#x3D; await Story.findOne({
  //     where: {
  //       id: id,
  //     },
  //   });
  //   return this.mapStory(story, lang);
  // }

  // public async searchStories(
  //   searchModel: SearchStoryDto,
  //   lang: string,
  //   userId?: number,
  // ) {
  //   const where: any &#x3D; {};
  //   if (searchModel.ownerId &amp;&amp; searchModel.ownerId !&#x3D;&#x3D; &#x27;&#x27;) {
  //     where.ownerId &#x3D; searchModel.ownerId;
  //   }
  //   if (searchModel.listingId &amp;&amp; searchModel.listingId !&#x3D;&#x3D; &#x27;&#x27;) {
  //     where.listingId &#x3D; searchModel.listingId;
  //   }
  //   if (searchModel.status !&#x3D; undefined) {
  //     where.status &#x3D; searchModel.status;
  //   }

  //   const stories &#x3D; await this.db.story.findMany({
  //     where: where,
  //     orderBy: {
  //       createdAt: &#x27;desc&#x27;,
  //     },
  //   });

  //   // return { data: stories, count: stories.length };

  //   // const stories &#x3D; await Story.findAndCountAll({
  //   //   where: where,
  //   //   offset: ((searchModel.pageIndex || 1) - 1) * (searchModel.pageSize || 10),
  //   //   limit: searchModel.pageSize,
  //   //   order: [[&#x27;createdAt&#x27;, &#x27;DESC&#x27;]],
  //   // });

  //   const result &#x3D; new SearchResultDto&lt;StoryDto&gt;();
  //   result.count &#x3D; stories.length;
  //   if (result.count &gt; 0) {
  //     const storiesWithListings &#x3D; stories.filter(
  //       (story) &#x3D;&gt; story.listingId !&#x3D; undefined,
  //     );
  //     let listings: ListingDto[] &#x3D; [];
  //     if (storiesWithListings &amp;&amp; storiesWithListings.length &gt; 0) {
  //       const listingIds &#x3D; storiesWithListings.map((story) &#x3D;&gt; story.listingId);
  //       listings &#x3D; await this.listingService.getListingsByIds(lang, listingIds);
  //     }
  //     const ownerIds &#x3D; stories.map((s) &#x3D;&gt; s.ownerId);

  //     let userFollowings: number[] &#x3D; [];
  //     if (userId)
  //       userFollowings &#x3D; await this.userService.getUserFollowedUsers(
  //         userId,
  //         ownerIds,
  //       );
  //     for (const dbStory of stories) {
  //       const story &#x3D; await this.mapStory(dbStory, lang, userFollowings);
  //       if (dbStory.listingId !&#x3D; undefined) {
  //         story.listing &#x3D; this.getListingSnippet(
  //           listings.find((l) &#x3D;&gt; l.id &#x3D;&#x3D;&#x3D; dbStory.listingId),
  //         );
  //       }
  //       result.data.push(story);
  //     }
  //   }
  //   return result;
  // }

  async mapStory(story: any, lang: string, myId: number): Promise&lt;StoryDto&gt; {
    /// listing should added also when it done
    /// excute all in parallel for better performance
    // most of this arrays are cached in redis , don&#x27;t worry about it
    const [
      { data: disclaimers },
      { data: privacy },
      { data: imaginativeYears },
      { data: user },
      listing,
    ] &#x3D; await Promise.all([
      this.lookupsService.getDisclaimers(lang),
      this.lookupsService.getPrivacy(lang),
      this.lookupsService.getImaginativeYears(),
      this.userService.getUser(story.ownerId, myId),
      this.db.listings.findUnique({
        where: { id: story.listingId || 0 },
        select: { id: true, name: true },
      }),
    ]);

    return {
      id: story.id,
      type: &#x27;Story&#x27;,
      owner: user,
      listing: listing || null,
      disclaimer:
        disclaimers.find((lt) &#x3D;&gt; lt.id &#x3D;&#x3D;&#x3D; story.disclaimerId) || null,

      privacy: privacy.find((lt) &#x3D;&gt; lt.id &#x3D;&#x3D;&#x3D; story.privacyId) || null,

      imaginativeYear:
        imaginativeYears.find((lt) &#x3D;&gt; lt.id &#x3D;&#x3D;&#x3D; story.imaginativeYearId) ||
        null,

      headerLine: story.headerLine,
      headerImage: story.headerImage,
      body: story.body,
      intro: story.intro,
      tagline: story.tagline,
      info: story.info,
      conclusion: story.conclusion,
      introImages: story.introImages,
      bodyImages: story.bodyImages,
      conclusionImages: story.conclusionImages,

      otherImaginativeYear: story.otherImaginativeYear,
      status: story.status,
      viewCount: story.viewCount,
      likeCount: story.likeCount,
      commentCount: story.commentCount,
      shareCount: story.shareCount,
      productViewCount: story.productViewCount,
      createdAt: story.createdAt,
      updatedAt: story.updatedAt,
    };
  }

  // getListingSnippet(listing?: ListingDto): any {
  //   if (listing) {
  //     return {
  //       id: listing.id,
  //       brandName: listing.brandName,
  //       name: listing.name,
  //       ratings: 0,
  //       media: listing.media,
  //       followers: 0,
  //       stories: 1,
  //       priceType: listing.priceTypeName,
  //       hiringType: listing.otherHiring || listing.hiringTypeName,
  //       otherPriceType: listing.otherPriceType,
  //       priceTypeFormat: listing.priceTypeFormat,
  //       stockAvailability: listing.stockAvailability,
  //       price: listing.price,
  //       currencySymbol: listing.currencySymbol,
  //       currencyCode: listing.currencyStandardCode,
  //       offerPrice: listing.offerPrice,
  //       avgReviews: Number(listing.avgReviews ?? 0),
  //       reviewsCount: Number(listing.reviewsCount ?? 0),
  //     };
  //   }
  //   return null;
  // }
  ///////////////////////////////////// new - mahmoud done ///////////////////////////////
  public async getAllStories(
    lang: string,
    pageIndex: number,
    pageSize: number,
    myId: number,
  ) {
    const stories &#x3D; await this.db.story.findMany({
      where: {
        status: 0,
      },
      skip: (pageIndex - 1) * pageSize,
      take: pageSize,
      orderBy: {
        id: &#x27;desc&#x27;,
      },
    });
    let result: StoryDto[] &#x3D; [];
    // to to it in async way for performance
    const promisesArr &#x3D; [];
    for (const story of stories) {
      promisesArr.push(this.mapStory(story, lang, myId));
    }
    result &#x3D; await Promise.all(promisesArr);
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    res.data &#x3D; result;
    return res;
  }

  public async getStoriesByIds(
    lang: string,
    ids: number[],
    myId: number,
    pageIndex: number,
    pageSize: number,
  ) {
    const stories &#x3D; await this.db.story.findMany({
      where: {
        id: {
          in: ids,
        },
      },
      skip: (pageIndex - 1) * pageSize,
      take: pageSize,
      orderBy: {
        id: &#x27;desc&#x27;,
      },
    });
    let result: StoryDto[] &#x3D; [];
    // to to it in async way for performance
    const promisesArr &#x3D; [];
    for (const story of stories) {
      promisesArr.push(this.mapStory(story, lang, myId));
    }
    result &#x3D; await Promise.all(promisesArr);
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    res.data &#x3D; result;
    return res;
  }

  public async addStory(lang: string, storyData: CreateStoryDto, myId: number) {
    //// check the sended listing id is valid
    if (storyData.listingId) {
      const listing &#x3D; await this.db.listings.findUnique({
        where: {
          id: storyData.listingId,
        },
      });

      if (!listing) {
        throw new NotFoundException(ErrorCodes.LISTING_NOT_FOUND);
      }
      // update number of stories  count in product
      await this.db.listings.update({
        where: {
          id: listing.id,
        },
        data: {
          storiesCount: {
            increment: 1,
          },
        },
      });
    }
    const story &#x3D; await this.db.story.create({
      data: {
        ...storyData,
        ownerId: myId,
      },
    });
    const result &#x3D; await this.mapStory(story, lang, myId);
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(
      MessageCodes.STORY_PUBLISHED_SUCCESSFULLY,
    );
    res.data &#x3D; result;
    return res;
  }

  public async updateStory(
    lang: string,
    storyData: UpdateStoryDto,
    storyId: number,
    myId: number,
  ) {
    const dbStory &#x3D; await this.db.story.findUnique({
      where: {
        id: storyId,
      },
    });

    if (!dbStory) {
      throw new NotFoundException(ErrorCodes.STORY_NOT_FOUND);
    }

    if (dbStory.ownerId !&#x3D; myId) {
      throw new ForbiddenException(
        ErrorCodes.YOU_ARE_NOT_ALLOWED_TO_EDIT_THIS_RESOURCE,
      );
    }
    //// check the sended listing id is valid
    if (storyData.listingId) {
      const listing &#x3D; await this.db.listings.findUnique({
        where: {
          id: storyData.listingId,
        },
      });

      if (!listing) {
        throw new NotFoundException(ErrorCodes.LISTING_NOT_FOUND);
      }
    }
    const story &#x3D; await this.db.story.update({
      where: {
        id: storyId,
      },
      data: {
        ...storyData,
      },
    });
    const result &#x3D; await this.mapStory(story, lang, myId);
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    res.data &#x3D; result;
    return res;
  }

  public async getStory(id: number, lang: string, myId?: number) {
    const dbStory &#x3D; await this.db.story.findUnique({
      where: {
        id: id,
      },
    });

    if (!dbStory) {
      throw new NotFoundException(ErrorCodes.STORY_NOT_FOUND);
    }
    const result &#x3D; await this.mapStory(dbStory, lang, myId);

    //// if i open my stories , then skip view count
    if (dbStory.ownerId !&#x3D; myId) {
      await this.db.story.update({
        where: {
          id: dbStory.id,
        },
        data: {
          viewCount: {
            increment: 1,
          },
        },
      });
    }

    // if (dbStory?.listingId) {
    //   const listing &#x3D; await this.listingService.getListing(
    //     dbStory.listingId,
    //     lang,
    //   );
    //   if (listing) {
    //     story.listing &#x3D; this.getListingSnippet(listing);
    //   }
    // }
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    res.data &#x3D; result;
    return res;
  }

  public async deleteStory(id: number, myId: number) {
    const dbStory &#x3D; await this.db.story.findUnique({
      where: {
        id: id,
      },
    });

    if (!dbStory) {
      throw new NotFoundException(ErrorCodes.STORY_NOT_FOUND);
    }

    if (dbStory.ownerId !&#x3D; myId) {
      throw new ForbiddenException(
        ErrorCodes.YOU_ARE_NOT_ALLOWED_TO_EDIT_THIS_RESOURCE,
      );
    }
    // delete story media
    /// after client modification , media could be related to another example story or template
    // so if media deleted it would affect on all of them , so till now i&#x27;ll not deleted any media
    // even if te story is deleted

    // await this.fileService.removeFile(dbStory.headerImage);
    // await this.fileService.removeFile(dbStory.introImage);
    // await this.fileService.removeFile(dbStory.bodyImage);
    // await this.fileService.removeFile(dbStory.conclusionImage);

    await this.db.story.delete({
      where: {
        id: id,
      },
    });

    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    return res;
  }
  async shareStory(id: number) {
    const dbStory &#x3D; await this.db.story.findUnique({
      where: {
        id: id,
      },
    });

    if (!dbStory) {
      throw new NotFoundException(ErrorCodes.STORY_NOT_FOUND);
    }
    const result &#x3D; await this.firebaseService.getFirebaseDynamicLink(
      DeepLinkShareRoutes.story,
      { resourceId: dbStory.id },
    );
    /// increase share count by one
    await this.db.story.update({
      where: {
        id: dbStory.id,
      },
      data: {
        shareCount: {
          increment: 1,
        },
      },
    });
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    res.data &#x3D; result;
    return res;
  }

  async toggleLikeStory(storyId: number, myId: number) {
    const isAlreadyLiked &#x3D; await this.db.storyLikes.findFirst({
      where: {
        storyId: storyId,
        userId: myId,
      },
    });

    if (isAlreadyLiked) {
      await this.db.storyLikes.delete({
        where: {
          id: isAlreadyLiked.id,
        },
      });
      /// decrease like count by one
      await this.db.story.update({
        where: {
          id: storyId,
        },
        data: {
          likeCount: {
            decrement: 1,
          },
        },
      });
    } else {
      /// increase like count by one
      await this.db.storyLikes.create({
        data: {
          storyId: storyId,
          userId: myId,
        },
      });
      await this.db.story.update({
        where: {
          id: storyId,
        },
        data: {
          likeCount: {
            increment: 1,
          },
        },
      });

      /// @ queue , add to notifications queue
    }
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    return res;
  }

  ///// comments section
  async addCommentStory(storyId: number, myId: number, comment: string) {
    const dbStory &#x3D; await this.db.story.findUnique({
      where: {
        id: storyId,
      },
    });

    if (!dbStory) {
      throw new NotFoundException(ErrorCodes.STORY_NOT_FOUND);
    }
    await this.db.storyComments.create({
      data: {
        storyId: storyId,
        userId: myId,
        comment: comment,
      },
    });
    /// increase comments count by one
    await this.db.story.update({
      where: {
        id: storyId,
      },
      data: {
        commentCount: {
          increment: 1,
        },
      },
    });

    /// @ queue , add to notifications queue

    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    return res;
  }
  async updateCommentStory(commentId: number, myId: number, comment: string) {
    const existComment &#x3D; await this.db.storyComments.findUnique({
      where: {
        id: commentId,
      },
    });

    if (!existComment) {
      throw new NotFoundException(ErrorCodes.COMMENT_NOT_FOUND);
    }

    if (existComment.userId !&#x3D; myId) {
      throw new ForbiddenException(
        ErrorCodes.YOU_ARE_NOT_ALLOWED_TO_EDIT_THIS_RESOURCE,
      );
    }
    await this.db.storyComments.update({
      where: {
        id: commentId,
      },
      data: {
        comment: comment,
      },
    });
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    return res;
  }
  async deleteCommentStory(commentId: number, myId: number) {
    const existComment &#x3D; await this.db.storyComments.findUnique({
      where: {
        id: commentId,
      },
    });

    if (!existComment) {
      throw new NotFoundException(ErrorCodes.COMMENT_NOT_FOUND);
    }

    if (existComment.userId !&#x3D; myId) {
      throw new ForbiddenException(
        ErrorCodes.YOU_ARE_NOT_ALLOWED_TO_EDIT_THIS_RESOURCE,
      );
    }
    await this.db.storyComments.delete({
      where: {
        id: commentId,
      },
    });
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    return res;
  }
  async getCommentsOfStory(
    pageIndex: number,
    pageSize: number,
    myId: number,
    storyId: number,
  ) {
    const result &#x3D; await this.db.storyComments.findMany({
      skip: (pageIndex - 1) * pageSize,
      take: pageSize,
      orderBy: {
        id: &#x27;desc&#x27;,
      },
      where: {
        storyId: storyId,
      },
    });

    const res &#x3D; new OperationResult();
    /// map isOwner bool for each comment
    res.data &#x3D; result.map((c) &#x3D;&gt; {
      return {
        ...c,
        /// mean is comment owner , this should help front end to show edit/delete btn
        isProfileOwner: myId &amp;&amp; myId &#x3D;&#x3D; c.userId ? true : false,
      };
    });

    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    return res;
  }

  ///// story draft section , getOne,delete,update will use same story functions
  public async getMyStoriesDrafts(
    lang: string,
    pageIndex: number,
    pageSize: number,
    myId: number,
  ) {
    const stories &#x3D; await this.db.story.findMany({
      where: {
        ownerId: myId,
        status: 1,
      },
      skip: (pageIndex - 1) * pageSize,
      take: pageSize,
      orderBy: {
        id: &#x27;desc&#x27;,
      },
    });

    let result: StoryDto[] &#x3D; [];
    // to to it in async way for performance
    const promisesArr &#x3D; [];
    for (const story of stories) {
      promisesArr.push(this.mapStory(story, lang, myId));
    }
    result &#x3D; await Promise.all(promisesArr);
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    res.data &#x3D; result;
    return res;
  }

  public async addStoryDraft(
    lang: string,
    storyData: CreateStoryDraftDto,
    myId: number,
  ) {
    //// check the sended listing id is valid
    if (storyData.listingId) {
      const listing &#x3D; await this.db.listings.findUnique({
        where: {
          id: storyData.listingId,
        },
      });

      if (!listing) {
        throw new NotFoundException(ErrorCodes.LISTING_NOT_FOUND);
      }
    }
    const story &#x3D; await this.db.story.create({
      data: {
        ...storyData,
        ownerId: myId,
        status: 1,
      },
    });

    const result &#x3D; await this.mapStory(story, lang, myId);
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    res.data &#x3D; result;
    return res;
  }

  ///// story template section , getOne,delete,update will use same story functions
  public async getMyStoriesTemplates(
    lang: string,
    pageIndex: number,
    pageSize: number,
    myId: number,
  ) {
    const stories &#x3D; await this.db.story.findMany({
      where: {
        ownerId: myId,
        status: 2,
      },
      skip: (pageIndex - 1) * pageSize,
      take: pageSize,
      orderBy: {
        id: &#x27;desc&#x27;,
      },
    });
    let result: StoryDto[] &#x3D; [];
    // to to it in async way for performance
    const promisesArr &#x3D; [];
    for (const story of stories) {
      promisesArr.push(this.mapStory(story, lang, myId));
    }
    result &#x3D; await Promise.all(promisesArr);
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    res.data &#x3D; result;
    return res;
  }

  public async addStoryTemplate(lang: string, storyId: number, myId: number) {
    const storyToCopy &#x3D; await this.db.story.findUnique({
      where: {
        id: storyId,
      },
    });

    if (!storyToCopy) {
      throw new NotFoundException(ErrorCodes.STORY_NOT_FOUND);
    }
    /// to create new id at run time
    delete storyToCopy.id;
    const story &#x3D; await this.db.story.create({
      data: {
        ...storyToCopy,
        status: 2,
      },
    });

    const result &#x3D; await this.mapStory(story, lang, myId);
    const res &#x3D; new OperationResult();
    res.message[0] &#x3D; await this.i18n.translateMsg(MessageCodes.DONE);
    res.data &#x3D; result;
    return res;
  }
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'StoryService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
